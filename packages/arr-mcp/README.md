# ARR MCP (`@allrightsrespected/mcp`)

ARR MCP server for **All Rights Respected (ARR)** evented workflows.

Status: experimental, functional.

This package exposes ARR interaction events (drafts, signatures, publication, verification)
over MCP, plus an HTTP/SSE transport and a REST facade for the widget.

## Install

```bash
npm install @allrightsrespected/mcp
```

## Usage (placeholder)

```ts
import { createArrMcpServer } from "@allrightsrespected/mcp";

const server = createArrMcpServer({
  name: "arr-mcp",
  version: "0.1.0",
  transport: "both",
  http: {
    port: 8787,
  },
});

await server.start();
```

## CLI runner

```bash
arr-mcp --transport http --port 8787
```

Flags:
- `--transport` (`stdio` | `http` | `both`)
- `--host`
- `--port`
- `--mcp-sse-path`
- `--mcp-message-path`
- `--events-path`

## Build notes

The widget imports `@allrightsrespected/mcp/widget`, which is generated by this package.
Build `@allrightsrespected/mcp` before `@allrightsrespected/widget` so the subpath export
(`./widget`) resolves to `dist/widget-contract.d.ts`. The repo root `npm run build`
already enforces this order.

## License

CC0-1.0

## Tools (current)

- `arr.events.list`
- `arr.events.watch`
- `arr.attestation.create_draft`
- `arr.attestation.sign`
- `arr.attestation.publish`
- `arr.attestation.verify`
- `arr.attestation.renew`
- `arr.revocation.create`

## HTTP/SSE Endpoints

When `transport: "http"` (or `"both"`), the server exposes:

- `GET /events` — SSE stream of ARR event envelopes
- `GET /sse` — MCP SSE transport (session bootstrap)
- `POST /messages?sessionId=...` — MCP messages for the SSE session
- `POST /api/v1/attestation/draft`
- `POST /api/v1/attestation/sign`
- `POST /api/v1/attestation/publish`
- `POST /api/v1/attestation/verify`
- `POST /api/v1/attestation/renew`
- `POST /api/v1/attestation/revoke`

The REST endpoints include CORS headers for browser-based widgets.
